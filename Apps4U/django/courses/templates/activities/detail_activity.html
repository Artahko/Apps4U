<h1>{{ activity.activity_text }}</h1>

<p>{{ activity.description }}</p>

<p>Published on: {{ activity.pub_date}}</p>

<br/><br/>

<h2>Comments</h2>

{%if not activity.comments.all %}

    No comments yet
    <br/><br/>
    <a href="{% url 'add_comment' course_slug=course.slug activity_id=activity.id %}">
        Add one
    </a>
{%else%}

    <a href="{% url 'add_comment' course_slug=course.slug activity_id=activity.id %}">Add comment</a>
    <br/><br/>
    {% for comment in activity.comments.all %}
        <strong>
            {{ comment.name }} -
            {{ comment.date_added }}
        </strong>
        <br/>
        {{ comment.body }}
        <br/><br/>
    {% endfor %}

{%endif%}


<br/><br/><br/>

<h3>Activity Materials</h3>
<div class="list-group">
    {% for material in activity.materials.all %}
        <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <strong>{{ material.name }}</strong>
                <br>
                <small class="text-muted">Uploaded on: {{ material.uploaded_at|date:"M d, Y" }}</small>
            </div>

            {% if material.upload %}
                <a href="{{ material.upload.url }}" class="btn btn-primary btn-sm" target="_blank">
                    View/Download File
                </a>
            {% else %}
                <span class="badge bg-secondary">No file attached</span>
            {% endif %}
        </div>
    {% empty %}
        <p>No materials have been uploaded for this activity yet.</p>
    {% endfor %}
</div>

<a href="{% url 'add_material' activity.course.slug activity.id %}" class="btn btn-success mt-3">
    + Add New Material
</a>

<br/><br/><br/>

<a href="{% url 'course_activities' course.slug %}">Back to list</a>
